script.go: compiled.js
	echo -e 'package client\n\n// This file is automatically generated! Do not modify it directly.\n\nconst Script = `' > script.go
	cat compiled.js >> script.go
	echo '`' >> script.go

compiled.js: base.js net.js client.js
	java -jar closure-compiler/compiler.jar \
		--compilation_level ADVANCED_OPTIMIZATIONS \
		--language_in ECMASCRIPT5_STRICT \
		--formatting PRETTY_PRINT \
		--js base.js \
		--js net.js \
		--js client.js \
		--js_output_file compiled.js
